@{
    ViewData["Title"] = "Order Success";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="py-5">
    <div class="container text-center">
        <div class="card shadow-sm p-5 border-0">
            <div class="mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="green" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.97 11.03a.75.75 0 0 0 1.07.02l3.992-3.992a.75.75 0 1 0-1.06-1.06L7.5 9.439 5.573 7.515a.75.75 0 0 0-1.06 1.06l2.457 2.455z" />
                </svg>
            </div>

            <h2 class="text-success mb-3">Order Placed Successfully!</h2>
            <p class="text-muted mb-4">Thank you for shopping with us. Your order has been received and is being processed.</p>

            <!-- ✅ Order Details -->
            <div class="mb-3">
                <h5>Order Details</h5>
                <p><strong>Order ID:</strong> <span id="orderId">#ORD12345</span></p>
                <p><strong>Estimated Delivery:</strong> <span id="deliveryDate">2-4 days</span></p>
                <p><strong>Payment Method:</strong> <span id="paymentMethod">Cash on Delivery</span></p>
            </div>

            <!-- ✅ Buttons -->
            <div class="d-flex justify-content-center gap-3 mt-4">
                <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#orderSummaryModal">
                    View Order Summary
                </button>
                <button class="btn btn-outline-success btn-lg" id="trackOrderBtn">
                    Track Your Order
                </button>
                <button class="btn btn-outline-dark btn-lg" id="allOrdersBtn">
                    View All Orders
                </button>
            </div>
        </div>
    </div>
</section>

<!-- ✅ Modal for Order Summary -->
<div class="modal fade" id="orderSummaryModal" tabindex="-1" aria-labelledby="orderSummaryLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="orderSummaryLabel">Order Summary</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul class="list-group" id="orderSummaryList">
                    <!-- Dynamic items will be loaded from localStorage -->
                </ul>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof loadOrders === "function") {
            loadOrders(); // Populate modal
        }

        // ✅ Redirect buttons
        document.getElementById("trackOrderBtn").addEventListener("click", function () {
            window.location.href = "/Home/TrackOrder"; // Create this page later
        });

        document.getElementById("allOrdersBtn").addEventListener("click", function () {
            window.location.href = "/Home/OrdersHistory"; // Create All Orders page later
        });
    });
</script>
